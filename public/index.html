<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Static Server with API</title>
    <!-- 引入 Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="p-4">
    <div class="container">
      <h1 class="mb-4">Shell 指令網頁介面</h1>

      <div class="d-flex flex-column gap-4">
        <!-- 按鈕 1 -->
        <div>
          <blockquote class="blockquote">
            <p class="mb-0 text-secondary">
              執行自訂義腳本 (shell / bat) 工具。
            </p>
            <p class="mb-0 text-secondary">
              請在 <span class="path-location"></span>
            </p>
            <p class="mb-0 text-secondary">
              的 <code>script.bat</code> 或
              <code>script.sh</code> 寫入腳本並點擊執行按鈕。
            </p>
          </blockquote>
          <button class="btn btn-primary mb-2" id="btn1">執行</button>
        </div>

        <!-- 顯示 API 回應結果的區域 -->
        <div id="responseArea" class="mt-4">
          <h4>回應結果：</h4>
          <pre id="responseText" class="bg-light p-3"></pre>
        </div>
      </div>
    </div>

    <!-- 引入 Bootstrap JS 和 Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // API 呼叫函式模板
      async function callApi(endpoint) {
        try {
          const response = await fetch(endpoint, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
            },
          });

          if (!response.ok) {
            throw new Error(`API 呼叫失敗: ${response.status}`);
          }

          // 解析回應內容（假設回應是 JSON 格式）
          const data = await response.json();
          return data;
        } catch (error) {
          // 錯誤處理
          console.error("API 錯誤:", error);
        }
      }

      // 為按鈕綁定事件
      document.getElementById("btn1").addEventListener("click", () => {
        callApi("/api/shell").then((data) => {
          document.getElementById("responseText").textContent = data.message;
        });
      });

      // 顯示路徑
      callApi("/api/path").then((data) => {
        document.querySelector(".path-location").textContent = data.message;
      });

      // 顯示路徑
    </script>
  </body>
</html>
